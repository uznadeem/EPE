@using Microsoft.AspNet.Identity
@model IEnumerable<FYP.Models.Community>

@section ScriptsDashboard {

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.1.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script>

        $(document).ready(function () {
            var oTable = $("#mydatatable").DataTable({
                "ajax": {
                    "url": '/admin/ShowCommunity',
                    "type": "get",
                    "datatype": "json"
                },
                "columns": [

                    { "data": "CommunityName", "autoWidth": true },
                    { "data" : "CommunityDomain", "autoWidth": true },
                    //{ "data" : "UserID", "autoWidth": true },
                    { "data": "CommunityAbout", "autoWidth": true },
                    {
                        "data": "CommunityID", "width": "30px", "render": function (data) {
                            return '<a class="btn btn-primary" href="/admin/ViewDetails/' + data + '">View Details</a>';
                        }
                    },
                    {
                        "data": "CommunityID", "width": "30px", "render": function (data) {
                            return '<a class="popup btn btn-primary" href="/admin/delete/' + data + '">Delete</a>';
                        }
                    }

                ]

            });

            $('.tablecontainer').on('click', 'a.popup', function (e) {
                e.preventDefault();
                OpenPopup($(this).attr('href'));
            })
            function OpenPopup(pageUrl) {
                var $pageContent = $('<div/>');
                $pageContent.load(pageUrl, function () {
                    $('#popupForm', $pageContent).removeData('validator');
                    $('#popupForm', $pageContent).removeData('unobtrusiveValidation');
                    $.validator.unobtrusive.parse('form');

                });

                $dialog = $('<div class="popupWindow" style="overflow:auto"></div>')
                          .html($pageContent)
                          .dialog({
                              draggable: false,
                              autoOpen: false,
                              resizable: false,
                              model: true,
                              title: 'Popup Dialog',
                              height: 550,
                              width: 600,
                              close: function () {
                                  $dialog.dialog('destroy').remove();
                              }
                          })

                $('.popupWindow').on('submit', '#popupForm', function (e) {
                    var url = $('#popupForm')[0].action;
                    $.ajax({
                        type: "POST",
                        url: url,
                        data: $('#popupForm').serialize(),
                        success: function (data) {
                            if (data.status) {
                                $dialog.dialog('close');
                                oTable.ajax.reload();
                            }
                        }
                    })

                    e.preventDefault();
                })
                $dialog.dialog('open');
            }
        })

    </script>


}




@{
    Layout = "~/Views/Shared/_LayoutProject.cshtml";
}



        <!-- SUB Banner -->
        <div class="profile-bnr sub-bnr user-profile-bnr">
            <div class="position-center-center">
                <div class="container">
                    <h2> </h2>
                </div>
            </div>
        </div>


        <div class="compny-profile">

            <!-- Profile Company Content -->
            <div class="profile-company-content" data-bg-color="fff">
                <div class="container">
                    <div class="row">

                        <!-- SIDE BAR -->
                        <div class="col-md-4">
                            <!-- Company Information -->
                            <div class="sidebar">
                                <h5 class="main-title">Uzair Nadeem</h5>
                                <div class="sidebar-thumbnail"> <img src="~/images/avatar.jpg" alt=""> </div>
                                <div class="sidebar-information">
                                    <div class="profile-usermenu">
                                        <ul class="nav nav-links">
                                            <li class="active"> <a href="#."> <i class="fa fa-heart-o"></i> Network </a> </li>
                                            <li> <a href="#."> <i class="fa fa-group"></i> Bookmarks </a> </li>
                                            <li> <a href="#."> <i class="fa fa-plus-circle"></i> Upgrade My Account </a> </li>
                                            <li> <a href="#."> <i class="fa fa-cog"></i> Account Settings </a> </li>
                                            @*@using (Html.BeginForm("LogOff", "Home", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                                                {
                                                    @Html.AntiForgeryToken()

                                                    <li>
                                                        <i class="fa fa-sign-out"></i><a href="javascript:document.getElementById('logoutForm').submit()">Sign Out</a>
                                                    </li>

                                                }*@
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content -->
                        <div class="col-md-8">

                            <h2>  Manager Dashboard</h2>


                            <div class="network">

                                <!-- Nav Tabs -->
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#AcForms">Active Forms (2)</a></li>
                                    <li><a data-toggle="tab" href="#comm">Communities (23)</a></li>
                                    <li><a data-toggle="tab" href="#sforms">Sealed Forms (103)</a></li>
                                </ul>

                                <!-- Tab Content -->
                                <div class="tab-content">

                                    <div id="AcForms" class="tab-pane fade in active">
                                        <div class="net-work-in">
                                            <h3> hello bravo</h3>
                                        </div>
                                    </div>

                                    <div id="comm" class="tab-pane fade">

                                        <div style="width:90%; margin:0 auto" class="tablecontainer">
                                            <a class="popup btn btn-primary" href="/admin/create" style="margin-bottom:15px; margin-top:15px;">Add New Community</a>

                                            <div class="row">


                                                <table id="mydatatable" width="100%">

                                                    <thead>
                                                        <tr>

                                                            <th>Community Name</th>
                                                            <th>Community Members</th>
                                                            <th>Community Forms</th>
                                                            <th>Edit  </th>

                                                            <th>Delete </th>


                                                        </tr>



                                                    </thead>


                                                    <tbody></tbody>

                                                </table>

                                            </div>
                                        </div>

                                    </div>

                                    <div id="sforms" class="tab-pane fade in active">

                                        <div class="net-work-in">
                                            <h3> hello jello</h3>
                                        </div>

                                    </div>


                                </div>


                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </div>


        <!-- HOME PRO-->










